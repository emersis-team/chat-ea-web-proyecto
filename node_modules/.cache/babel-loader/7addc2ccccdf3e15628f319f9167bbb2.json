{"remainingRequest":"C:\\Users\\javi_\\Desktop\\asd\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\javi_\\Desktop\\asd\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\javi_\\Desktop\\asd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\javi_\\Desktop\\asd\\src\\views\\Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\javi_\\Desktop\\asd\\src\\views\\Chat.vue","mtime":1597408785150},{"path":"C:\\Users\\javi_\\Desktop\\asd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\javi_\\Desktop\\asd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\javi_\\Desktop\\asd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\javi_\\Desktop\\asd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVuc2FqZXM6IFtdLAogICAgICB1c2VySWQ6IG51bGwsCiAgICAgIHByaW1lcmFQYWdpbmE6IHRydWUsCiAgICAgIGN1cnJlbnRQYWdlOiAwLAogICAgICBsYXN0UGFnZTogMCwKICAgICAgbWVuc2FqZU9mZnNldDogbnVsbAogICAgfTsKICB9LAogIHByb3BzOiB7fSwKICBjb21wdXRlZDoge30sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMudXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIiR1c2VySWQiKTsKICAgIHRoaXMuZ2V0Q2hhdCgpOwogICAgdGhpcy5hY3R1YWxpemFyKCk7CiAgICB0aGlzLm1lbnNhamVzID0gW107CiAgICB0aGlzLiRyZWZzLmNoYXRTY3JvbGwuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgdGhpcy5vblNjcm9sbCk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLiRldmVudEh1Yi4kb24oImNoYXQtZ2V0IiwgZnVuY3Rpb24gKGlkKSB7CiAgICAgIHJldHVybiBfdGhpcy5nZXRDaGF0KGlkKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgYWN0dWFsaXphcjogZnVuY3Rpb24gYWN0dWFsaXphcigpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LmdldENoYXQoKTsKICAgICAgICB0aGF0LmFjdHVhbGl6YXIoKTsKICAgICAgfSwgMzAwMCk7CiAgICB9LAogICAgZ2V0Q2hhdDogZnVuY3Rpb24gZ2V0Q2hhdChpZCkgewogICAgICBpZiAoaWQgPT0gbnVsbCkgewogICAgICAgIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVuc2FqZXMgPSBbXTsKICAgICAgICB0aGlzLnByaW1lcmFQYWdpbmEgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLiRsb2NhbHVybCArICIvYXBpL3YxL21lc3NhZ2VzLyIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAodGhhdC5wcmltZXJhUGFnaW5hID09IHRydWUgJiYgIXRoYXQuaXNPdmVyZmxvd24oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRTY3JvbGwiKSkpIHsKICAgICAgICAgIHRoYXQucHJpbWVyYVBhZ2luYSA9IGZhbHNlOwogICAgICAgICAgdGhhdC5nZXRDaGF0UGFnZSgyKTsKICAgICAgICB9CgogICAgICAgIHZhciBzY3JvbGxlYXIgPSBmYWxzZTsKICAgICAgICB0aGF0Lmxhc3RQYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcy5sYXN0X3BhZ2U7CiAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlcy5kYXRhLnJldmVyc2UoKTsKICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2VzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgaWYgKCF0aGF0Lm1lbnNhamVzLnNvbWUoZnVuY3Rpb24gKG1lbnNhamUpIHsKICAgICAgICAgICAgcmV0dXJuIG1lbnNhamUuaWQgPT0gbS5pZDsKICAgICAgICAgIH0pICYmIG0uY29udmVyc2F0aW9uX2lkID09IHRoYXQuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgICAgICB0aGF0Lm1lbnNhamVzLnB1c2gobSk7CiAgICAgICAgICAgIHNjcm9sbGVhciA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChzY3JvbGxlYXIgPT0gdHJ1ZSkgewogICAgICAgICAgdGhhdC5tZW5zYWplT2Zmc2V0ID0gdGhhdC5tZW5zYWplc1t0aGF0Lm1lbnNhamVzLmxlbmd0aCAtIDFdOwogICAgICAgICAgdGhhdC5zY3JvbGxUb0JvdHRvbSgpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIGdldENoYXRQYWdlOiBmdW5jdGlvbiBnZXRDaGF0UGFnZShwYWdpbmEpIHsKICAgICAgdGhpcy5tZW5zYWplT2Zmc2V0ID0gdGhpcy5tZW5zYWplc1swXTsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2luYTsKICAgICAgdmFyIHBhZyA9ICIiOwoKICAgICAgaWYgKHBhZ2luYSAhPSBudWxsKSB7CiAgICAgICAgcGFnID0gIj9wYWdlPSIgKyBwYWdpbmE7CiAgICAgIH0KCiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy4kYXhpb3MuZ2V0KHRoaXMuJGxvY2FsdXJsICsgIi9hcGkvdjEvbWVzc2FnZXMvIiArIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCArIHBhZykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2VzLmRhdGEucmV2ZXJzZSgpOwogICAgICAgIHRoYXQubWVuc2FqZXMgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2VzLmRhdGEuY29uY2F0KHRoYXQubWVuc2FqZXMpOwogICAgICAgIHRoYXQuc2Nyb2xsVG9Cb3R0b20oKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIG9uU2Nyb2xsOiBmdW5jdGlvbiBvblNjcm9sbCgpIHsKICAgICAgdmFyIHRhcmdldCA9IHRoaXMuJHJlZnMuY2hhdFNjcm9sbDsKCiAgICAgIGlmICh0YXJnZXQuc2Nyb2xsVG9wIDwgdGFyZ2V0LmNsaWVudEhlaWdodCAqIDAuMSkgewogICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlIDwgdGhpcy5sYXN0UGFnZSkgewogICAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLm9mZnNldCArIHRoaXMubGltaXQ7CiAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlKys7CiAgICAgICAgICB0aGlzLmdldENoYXRQYWdlKHRoaXMuY3VycmVudFBhZ2UpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNjcm9sbFRvQm90dG9tOiBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbSgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRTY3JvbGwiKS5zY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGF0Lm1lbnNhamVPZmZzZXQuaWQpLm9mZnNldFRvcDsKICAgICAgfSk7CiAgICB9LAogICAgZW52aWFyOiBmdW5jdGlvbiBlbnZpYXIoKSB7CiAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICAgICAgdmFyIHRleHRvID0gdGhpcy4kcmVmcy5pbnB1dFRleHRvLnZhbHVlOwoKICAgICAgaWYgKHRleHRvICE9ICIiKSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dFRleHRvLnZhbHVlID0gIiI7CiAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBkYXRhLmFwcGVuZCgibWVzc2FnZSIsIHRleHRvKTsKICAgICAgICBkYXRhLmFwcGVuZCgicmVjZWl2ZXJfaWQiLCB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcl9kZXN0X2lkKTsKICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgICAgdGhpcy4kYXhpb3MucG9zdCh0aGlzLiRsb2NhbHVybCArICIvYXBpL3YxL21lc3NhZ2VzIiwgZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGF0LmdldENoYXQoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBhbGVydCgiU2UgcHJvZHVqbyB1biBlcnJvciwgcmVpbnRlbnRlIik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpc092ZXJmbG93bjogZnVuY3Rpb24gaXNPdmVyZmxvd24oZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBlbGVtZW50LmNsaWVudEhlaWdodCB8fCBlbGVtZW50LnNjcm9sbFdpZHRoID4gZWxlbWVudC5jbGllbnRXaWR0aDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"home-body\">\n      <div class=\"home-right\">\n        <div class=\"chat\">\n          <div id=\"chatScroll\" class=\"chat-scroll\" ref=\"chatScroll\" @scroll=\"onScroll\">\n            <div\n              v-for=\"mensaje in mensajes\"\n              :key=\"mensaje.id\"\n              :id=\"mensaje.id\"\n              class=\"chat-container\"\n              v-bind:class=\"{ 'chat-mensaje-propio': mensaje.sender_id == userId }\"\n            >\n              <div class=\"chat-mensaje\">\n                <label>{{ mensaje.message }}</label>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"chat-bottom\">\n            <input\n              type=\"text\"\n              placeholder=\"Escribe un mensaje aquí\"\n              ref=\"inputTexto\"\n              v-on:keyup.enter=\"enviar()\"\n            />\n            <button class=\"chat-enviar\" @click=\"enviar()\">Enviar</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      mensajes: [],\n      userId: null,\n      primeraPagina: true,\n      currentPage: 0,\n      lastPage: 0,\n      mensajeOffset: null\n    };\n  },\n  props: {},\n  computed: {},\n  mounted() {\n    this.userId = localStorage.getItem(\"$userId\");\n    this.getChat();\n    this.actualizar();\n    this.mensajes = [];\n    this.$refs.chatScroll.addEventListener(\"touchmove\", this.onScroll);\n  },\n  created() {\n    this.$eventHub.$on(\"chat-get\", id => this.getChat(id));\n  },\n  methods: {\n    actualizar() {\n      var that = this;\n      setTimeout(function() {\n        that.getChat();\n        that.actualizar();\n      }, 3000);\n    },\n    getChat(id) {\n      if (id == null) {\n        id = this.$route.params.id;\n      } else {\n        this.mensajes = [];\n        this.primeraPagina = true;\n      }\n      var that = this;\n      this.$axios\n        .get(this.$localurl + \"/api/v1/messages/\" + id)\n        .then(function(response) {\n          if (\n            that.primeraPagina == true &&\n            !that.isOverflown(document.getElementById(\"chatScroll\"))\n          ) {\n            that.primeraPagina = false;\n            that.getChatPage(2);\n          }\n          var scrollear = false;\n          that.lastPage = response.data.messages.last_page;\n          response.data.messages.data.reverse();\n          response.data.messages.data.forEach(m => {\n            if (\n              !that.mensajes.some(mensaje => mensaje.id == m.id) &&\n              m.conversation_id == that.$route.params.id\n            ) {\n              that.mensajes.push(m);\n              scrollear = true;\n            }\n          });\n          if (scrollear == true) {\n            that.mensajeOffset = that.mensajes[that.mensajes.length - 1];\n            that.scrollToBottom();\n          }\n        })\n        .catch(function() {});\n    },\n    getChatPage(pagina) {\n      this.mensajeOffset = this.mensajes[0];\n      this.currentPage = pagina;\n      var pag = \"\";\n      if (pagina != null) {\n        pag = \"?page=\" + pagina;\n      }\n      var that = this;\n      this.$axios\n        .get(this.$localurl + \"/api/v1/messages/\" + this.$route.params.id + pag)\n        .then(function(response) {\n          response.data.messages.data.reverse();\n          that.mensajes = response.data.messages.data.concat(that.mensajes);\n          that.scrollToBottom();\n        })\n        .catch(function() {});\n    },\n    onScroll() {\n      var target = this.$refs.chatScroll;\n      if (target.scrollTop < target.clientHeight * 0.1) {\n        if (this.currentPage < this.lastPage) {\n          this.offset = this.offset + this.limit;\n          this.currentPage++;\n          this.getChatPage(this.currentPage);\n        }\n      }\n    },\n    scrollToBottom() {\n      var that = this;\n      this.$nextTick(() => {\n        document.getElementById(\n          \"chatScroll\"\n        ).scrollTop = document.getElementById(that.mensajeOffset.id).offsetTop;\n      });\n    },\n    enviar() {\n      this.scrollToBottom();\n      var texto = this.$refs.inputTexto.value;\n      if (texto != \"\") {\n        this.$refs.inputTexto.value = \"\";\n        var data = new FormData();\n        data.append(\"message\", texto);\n        data.append(\"receiver_id\", this.$route.params.user_dest_id);\n        var that = this;\n        this.$axios\n          .post(this.$localurl + \"/api/v1/messages\", data)\n          .then(function() {\n            that.getChat();\n          })\n          .catch(function() {\n            alert(\"Se produjo un error, reintente\");\n          });\n      }\n    },\n    isOverflown(element) {\n      return (\n        element.scrollHeight > element.clientHeight ||\n        element.scrollWidth > element.clientWidth\n      );\n    }\n  }\n};\n</script>\n\n<style scoped src=\"../assets/css/components/chat.css\"></style>\n<style scoped src=\"../assets/css/views/home.css\"></style>\n"],"sourceRoot":"src/views"}]}